<sm-page>
  <sm-page-loader>
    <ng-template>
      <div class="mb-5">
        <h1 class="page-title">User Management</h1>
        <p class="page-subtitle">
          View, add, and manage users within the system.
        </p>

      </div>
      <sm-card>
        <p-table
          [value]="users()"
          styleClass="p-datatable-sm"
          [tableStyle]="{ 'min-width': '50rem' }"
        >
          <ng-template pTemplate="caption">
            <div class="flex justify-content-end">
              <button pButton size="small" (click)="onAddUser()">
                <div class="flex gap-2 align-items-center">
                  <i-lucide [img]="Plus" class="w-1rem h-1rem"></i-lucide>
                  <span>Add User</span>
                </div>
              </button>
            </div>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th>Username</th>
              <th>Authorities</th>
              <th></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-user>
            <tr>
              <td>{{ user.login }}</td>
              <td>{{ user.authorities }}</td>
              <td class="text-right">
                <p-button
                  icon="pi pi-pencil"
                  class="mr-2"
                  [rounded]="true"
                  [outlined]="true"
                  severity="success"
                  (onClick)="onEditUser(user)"/>
                <p-button
                  icon="pi pi-trash"
                  severity="danger"
                  [rounded]="true"
                  [outlined]="true"
                  (onClick)="onDeleteUser(user)"/>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <!-- ðŸ‘‡ numÄƒrul de coloane din header -->
              <td colspan="3" style="padding: 0">
                <p-paginator
                  (onPageChange)="onPageChange($event)"
                  [first]="first"
                  [rows]="rows"
                  [totalRecords]="totalRecords"
                  [rowsPerPageOptions]="[5, 10, 20]"
                  styleClass="w-full justify-center"/>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </sm-card>
    </ng-template>
  </sm-page-loader>
</sm-page>
